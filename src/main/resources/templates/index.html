<!DOCTYPE html>
<html lang="fr"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="/templates/base.html" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="base :: html_head">
    <title layout:fragment="title">Accueil</title>
</head>
<body sec:authorize="isAuthenticated()">

<div layout:fragment="content">

    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top header-inner-pages">
        <div class="container d-flex align-items-center">

            <h1 class="logo me-auto"><a th:href="@{/}">GeniusQuizz</a></h1>

            <nav id="navbar" class="navbar">
                <ul>
                    <li><a class="nav-link scrollto active" href="#hero">Accueil</a></li>
                    <li><a class="nav-link scrollto" href="#score">Score</a></li>
                    <li><a class="nav-link scrollto" href="#about">A propos de nous</a></li>
                    <li><a class="nav-link scrollto" href="#advanced">Votre avanc√©</a></li>
                    <li><a class="nav-link scrollto" href="#services">Quizz</a></li>
                    <li><a class="nav-link scrollto" href="#team">√âquipe</a></li>
                    <li><a class="nav-link scrollto" href="#contact">Nous contacter</a></li>
<!--                    <li><a class="nav-link" th:href="@{/profile}" ><span sec:authentication="principal.username"></span></a></li>-->
                    <li><a class="nav-link" th:href="@{/profile}" ><span th:text="${user.getFirstName()}+' '+ |${user.getLastName()}|"></span></a></li>
                    <li><a class="getstarted scrollto" id="decoBt" th:href="@{/logout}">D√©connexion</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->

        </div>
    </header><!-- End Header -->

    <!-- ======= Hero Section ======= -->
    <section id="hero" class="d-flex align-items-center">

        <div class="container">
            <div class="row">
                <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1" data-aos="fade-up" data-aos-delay="200">
                    <h1>GeniusQuizz</h1>
                    <h2>1 Quizz et 1 Win par jour <br> #BONNESANTE</h2>
                    <div class="d-flex justify-content-center justify-content-lg-start">
                        <a th:href="@{/sessions}" class="btn-get-started scrollto">Vos sessions</a>
<!--                        <a href="https://www.youtube.com/watch?v=jDDaplaOz7Q" class="glightbox btn-watch-video"><i class="bi bi-play-circle"></i><span>Watch Video</span></a>-->
                    </div>
                </div>
                <div class="col-lg-6 order-1 order-lg-2 hero-img" data-aos="zoom-in" data-aos-delay="200">
                    <img src="assets/img/hero-img.png" class="img-fluid animated" alt="">
                </div>
            </div>
        </div>

    </section><!-- End Hero -->

    <main id="main">

        <!-- ======= About Us Section ======= -->
        <section id="score" class="about">
            <div class="section-title">
                <h2>Tableau des scores</h2>
            </div>
            <div class="scoreboard" th:if="${podium}">
                <div class="scoreboard__podiums">
                    <div class="scoreboard__podium js-podium" data-height="200px">
                        <div class="scoreboard__podium-base scoreboard__podium-base--second">
                            <div class="scoreboard__podium-rank">2</div>
                        </div>
                        <div class="scoreboard__podium-number">
                            <span th:text="${top2Email}"></span>
                            <small><span class="js-podium-data" th:text="'Score total de '+${top2Score}"></span></small>
                        </div>

                    </div>
                    <div class="scoreboard__podium js-podium" data-height="250px">
                        <div class="scoreboard__podium-base scoreboard__podium-base--first">
                            <div class="scoreboard__podium-rank">1</div>

                        </div>
                        <div class="scoreboard__podium-number">
                            <span th:text="${top1Email}"></span>
                            <small><span class="js-podium-data" th:text="'Score total de '+${top1Score}"></span></small>
                        </div>
                    </div>
                    <div class="scoreboard__podium js-podium" data-height="150px">
                        <div class="scoreboard__podium-base scoreboard__podium-base--third">
                            <div class="scoreboard__podium-rank">3</div>
                        </div>
                        <div class="scoreboard__podium-number">
                            <span th:text="${top3Email}"></span>
                            <small><span class="js-podium-data" th:text="'Score total de '+${top3Score}"></span></small>
                        </div>
                    </div>
                </div>

<!--                <div style="max-height: 200px!important; overflow-y: scroll">-->
<!--                    <table class="table">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th scope="col">#</th>-->
<!--                            <th scope="col">Pseudo</th>-->
<!--                            <th scope="col">Score</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr>-->
<!--                            <th scope="row">1</th>-->
<!--                            <td>Souf</td>-->
<!--                            <td>32</td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
            </div>
            <div class="container" th:unless="${podium}">
                <div class="text-center">
                    <p>
                        Pas encore de donn√©es suffisantes pour cr√©er un podium ü§∑‚Äç
                    </p>
                </div>
            </div>
        </section><!-- End About Us Section -->

        <!-- ======= About Us Section ======= -->
        <section id="about" class="about section-bg">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>A propos de nous </h2>
                </div>

                <div class="row content">
                    <div class="col-lg-12">
                        <p>
                            Bienvenue √† tous sur Genius Quizz, nous vous proposons des sessions sur :
                        </p>
                        <ul>
                            <li><i class="ri-check-double-line"></i> la culture g√©nerale </li>
                            <li><i class="ri-check-double-line"></i> fait divers</li>
                            <li><i class="ri-check-double-line"></i> d'autres arrivent bient√¥t ...</li>
                        </ul>
                    </div>
                    <div class="col-lg-6 pt-4 pt-lg-0">
                        <a href="#contact" class="btn-learn-more">Proposer de nouveau Quizz üéÅ</a>
                    </div>
                </div>
            </div>
        </section><!-- End About Us Section -->

        <!-- ======= Skills Section ======= -->
        <section id="advanced" class="skills">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Votre avanc√©</h2>
                </div>

                <div class="row content">
                    <div class="col-lg-6 d-flex align-items-center" data-aos="fade-right" data-aos-delay="100">
                        <img src="assets/img/skills.png" class="img-fluid" alt="">
                    </div>
                    <div class="col-lg-6 pt-4 pt-lg-0 content" data-aos="fade-left" data-aos-delay="100">
                        <h3>Votre avanc√© dans les sessions de quizz</h3>
                        <p class="fst-italic">
                            N'h√©sitez pas √† faire appel √† un ami üòâ.
                        </p>

                        <div class="skills-content">

                            <div class="progress">
                                <span class="skill">Nombres de sessions faites <i class="val" th:text="${sessions.size()}"></i></span>
                                <div class="progress-bar-wrap">
                                    <div class="progress-bar" role="progressbar" th:attr="aria-valuenow=${sessions.size()}" aria-valuemin="0" aria-valuemax="10"></div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>

            </div>
        </section><!-- End Skills Section -->

        <!-- ======= Services Section ======= -->
        <section id="services" class="services section-bg">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Quizz</h2>
                    <p>Vous allez pouvoir d√©marrer de nouveau Quizz, bon courage !</p>
                </div>

                <div class="row">
                    <div class="col-xl-2 col-md-6 d-flex align-items-stretch" data-aos="zoom-in" data-aos-delay="100" th:each="s: ${sessions}">
                        <div class="icon-box">
                            <div class="icon"><i class="bx bxl-dribbble"></i></div>
                            <h4>GeniusQuizz</h4>
                            <br>
                            <p>Votre score actuel est de <b><span th:text="${s.score}"></span></b></p>
                            <br>
                            <p> Il vous reste <b><span th:text="${s.life}"></span></b> vie ou chance üíÄ</p>
                            <br>
                            <a th:if="${ s.life > 0 }" th:href="@{'/quizz/' + ${s.id}}" class="btn-get-started scrollto">
                                <button type="button" class="btn btn-info text-white">Continuer</button>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </section><!-- End Services Section -->

        <!-- ======= Team Section ======= -->
        <section id="team" class="team ">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Notre √©quipes</h2>
                    <p>Nous sommes actuellement une √©quipe de deux personnes, nous r√©alisons ce projet dans le cadre de d√©couvrir une nouvelle technologie</p>
                </div>

                <div class="row">

                    <div class="col-lg-6">
                        <div class="member d-flex align-items-start" data-aos="zoom-in" data-aos-delay="100">
                            <div class="pic"><img src="assets/img/team/team-1.jpg" class="img-fluid" alt=""></div>
                            <div class="member-info">
                                <h4>Killian POTREL</h4>
                                <span>D√©veloppeur</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mt-4 mt-lg-0">
                        <div class="member d-flex align-items-start" data-aos="zoom-in" data-aos-delay="200">
                            <div class="pic"><img src="assets/img/team/team-3.jpg" class="img-fluid" alt=""></div>
                            <div class="member-info">
                                <h4>Soufiane DRIBEL</h4>
                                <span>D√©veloppeur</span>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </section><!-- End Team Section -->

        <!-- ======= Contact Section ======= -->
        <section id="contact" class="contact section-bg">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Contact</h2>
                    <p>Nous sommes √† votre disposition pour toutes questions ou demandes.</p>
                </div>

                <div class="row">

                    <div class="col-lg-5 d-flex align-items-stretch">
                        <div class="info">
                            <div class="address">
                                <i class="bi bi-geo-alt"></i>
                                <h4>Location:</h4>
                                <p>Marseille</p>
                            </div>

                            <div class="email">
                                <i class="bi bi-envelope"></i>
                                <h4>Email:</h4>
                                <p>soufianedri130@gmail.com / kpotrel@gmail.com</p>
                            </div>

<!--                            <div class="phone">-->
<!--                                <i class="bi bi-phone"></i>-->
<!--                                <h4>Call:</h4>-->
<!--                                <p>+1 5589 55488 55s</p>-->
<!--                            </div>-->

                            <iframe src="https://www.google.com/maps/embed/v1/place?q=Marseille,+France&key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8" frameborder="0" style="border:0; width: 100%; height: 290px;" allowfullscreen></iframe>
                        </div>

                    </div>

                    <div class="col-lg-7 mt-5 mt-lg-0 d-flex align-items-stretch">
                        <form action="forms/contact.php" method="post" role="form" class="php-email-form">
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="name">Votre Nom</label>
                                    <input type="text" name="name" class="form-control" id="name" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="name">Votre Email</label>
                                    <input type="email" class="form-control" name="email" id="email" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="name">Sujet</label>
                                <input type="text" class="form-control" name="subject" id="subject" required>
                            </div>
                            <div class="form-group">
                                <label for="name">Message</label>
                                <textarea class="form-control" name="message" rows="10" required></textarea>
                            </div>
                            <div class="my-3">
                                <div class="loading">Loading</div>
                                <div class="error-message"></div>
                                <div class="sent-message">Your message has been sent. Thank you!</div>
                            </div>
                            <div class="text-center"><button type="submit">Envoie du Message</button></div>
                        </form>
                    </div>

                </div>

            </div>
        </section><!-- End Contact Section -->

    </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">

        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-3 col-md-6 footer-contact">
                        <h3>GeniusQuizz</h3>
                        <p>
                        </p>
                    </div>

                    <div class="col-lg-3 col-md-6 footer-links">
                        <h4>Liens utiles</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#hero}">Accueil</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#about}">A propos de nous</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#advanced}">Votre avanc√©</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#services}">Quizz</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#team}">√âquipe</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/#contact}">Nous contacter</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-3 col-md-6 footer-links">
                        <h4>Nos sites</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a th:href="@{/}">GeniusQuizz</a></li>
                        </ul>
                    </div>

                    <div class="col-lg-3 col-md-6 footer-links">
                        <h4>Nos r√©seaux socials</h4>
                        <p>N'h√©sitez pas √† nous soutenir</p>
                        <div class="social-links mt-3">
                            <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                            <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                            <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                            <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                            <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="container footer-bottom clearfix">
            <div class="copyright">
                &copy; Copyright <strong><span>GeniusQuizz</span></strong>. All Rights Reserved
            </div>
            <div class="credits">
              Develop by Kiwi and Souf
            </div>
        </div>
    </footer><!-- End Footer -->

    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
</div>

    <div th:replace="base :: html_scripts"></div>

    <style>
        .number-holder {
            transition: all 500ms ease-in-out;
        }

        .scoreboard {
            border-radius: 5px;
            display: flex;
            max-width: 1170px;
            margin: 0 auto;
            padding: 3rem 50px;
            flex-direction: column;
            background: #fff;
        }
        .scoreboard__item {
            display: flex;
            padding: 1rem 0;
            width: 100%;
            margin-top: 2rem;
            flex-wrap: wrap;
            opacity: 0;
            top: 20px;
            transition: 500ms ease-in-out;
        }
        .scoreboard__item.is-visible {
            opacity: 1;
            top: 0;
            transition: 500ms ease-in-out;
        }
        .scoreboard__title {
            width: 300px;
            font-weight: 600;
        }
        .scoreboard__title small {
            color: #333;
        }
        .scoreboard__status {
            font-weight: 300;
        }
        .scoreboard__numbers {
            font-weight: 600;
            text-align: right;
            align-self: flex-end;
            margin-left: 20px;
            flex: 1;
        }
        .scoreboard__bar {
            width: 100%;
            margin-top: 1rem;
            background: #ececec;
            height: 10px;
            position: relative;
            border-radius: 5px;
            transition: all 500ms ease-in-out;
            display: flex;
            flex-basis: 100%;
        }
        .scoreboard__bar:before {
            content: "";
            width: 100%;
            flex-basis: 100%;
            clear: both;
            display: block;
        }
        .scoreboard__bar-bar {
            position: absolute;
            height: 10px;
            left: 0;
            top: 0;
            width: 0;
            border-radius: 5px;
            background: linear-gradient(to right, #F0CF65 0%, #ebc137 100%);
            transition: all 250ms ease-in-out;
        }

        .scoreboard__podiums {
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            margin: 20px auto 100px auto;
            min-height: 350px;
        }
        .scoreboard__podiums .scoreboard__podium {
            margin: 0 20px;
            display: flex;
            flex-direction: column;
            align-self: flex-end;
            flex-wrap: wrap;
            flex: 1;
            opacity: 0;
            top: -10px;
        }
        .scoreboard__podiums .scoreboard__podium.is-visible {
            top: 0;
            opacity: 1;
            transition: all 500ms ease-in-out;
        }
        .scoreboard__podiums .scoreboard__podium-rank {
            font-size: 4rem;
            font-weight: 700;
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
            bottom: 0px;
        }
        .scoreboard__podiums .scoreboard__podium-base {
            height: 0;
            background: #ececec;
            color: #fff;
            min-width: 150px;
            border-radius: 5px;
            transition: all 1000ms ease-in-out;
            opacity: 0;
            position: relative;
        }
        .scoreboard__podiums .scoreboard__podium-base.is-expanding {
            opacity: 1;
        }
        .scoreboard__podiums .scoreboard__podium-base--first {
            background: linear-gradient(to bottom, #BD4F6C 0%, #9e3b55 100%);
        }
        .scoreboard__podiums .scoreboard__podium-base--second {
            background-color: #F0CF65;
            background: linear-gradient(to bottom, #F0CF65 0%, #ebc137 100%);
        }
        .scoreboard__podiums .scoreboard__podium-base--third {
            background-color: #5E9EAD;
            background: linear-gradient(to bottom, #5E9EAD 0%, #49828f 100%);
        }
        .scoreboard__podiums .scoreboard__podium-number {
            text-align: center;
            font-size: 1.5rem;
            margin-top: 10px;
        }
        .scoreboard__podiums .scoreboard__podium-number small {
            display: block;
            font-size: 60%;
            color: #333;
            line-height: 1.5;
            text-transform: uppercase;
        }

        .credits {
            font-size: 14px;
            text-align: center;
            margin: 20px 0;
        }

        #scoreboard__items {
            position: relative;
            margin: 0;
            padding: 0;
            list-style-type: decimal;
        }

        .oneup-audio {
            display: none;
        }

        .style-switch {
            position: absolute;
            top: 0;
            left: 0;
            background: #000;
            color: #fff;
            padding: 5px 10px;
            border: none;
            font-size: 15px;
        }

        .bump {
            -webkit-animation: bump 500ms ease-in-out;
            animation: bump 500ms ease-in-out;
        }

        @-webkit-keyframes bump {
            50% {
                transform: scale(1.1);
            }
            60% {
                transform: scale(1);
            }
        }

        @keyframes bump {
            50% {
                transform: scale(1.1);
            }
            60% {
                transform: scale(1);
            }
        }
    </style>

<script>
    var sum = 1000; // rank 1.
    var time = 250;

    $(document).ready(function() {

        $('body').addClass('dark-mode');

        $('.js-style-switch').on('click', function(e) {
            e.preventDefault();
            $('body').toggleClass('dark-mode');
        });

        $('.js-podium').each(function(){
            var t = $(this);
            setTimeout( function(){
                t.addClass('is-visible');
                var h = t.data('height');
                console.log(h);
                t.find('.scoreboard__podium-base').css('height', h).addClass('is-expanding');
            }, time);
            time += 250;
        });

        randomizeData();
        startBars();
        sortItems();
        countUp();
        // randomizePodium();

    });


    function countUp() {

        $('.scoreboard__item').each(function() {
            var $this = $(this),
                countTo = $this.data('count');

            $({ countNum: $this.text()}).animate({
                    countNum: countTo
                },

                {
                    duration: 500,
                    easing:'linear',
                    step: function() {
                        $this.find('.js-number').text(Math.floor(this.countNum));
                    },
                    complete: function() {
                        $this.find('.js-number').text(this.countNum);
                        //alert('finished');
                    }

                });
        });
    }

    function randomizeData() {
        $('.scoreboard__item').each(function(){
            var rand = Math.floor(Math.random() * 900) + 1;
            $(this).data('count', rand );
            $(this).find('.js-number').text(rand);
        });

    }

    function startBars() {
        $('.js-bar').each(function() {
            console.log('running');
            // calculate %.
            var t = $(this);
            setTimeout( function(){
                var width = t.parent('.scoreboard__item').data('count');
                width = width  / sum * 100;
                width = Math.round(width);
                t.find('.scoreboard__bar-bar').css('width',  width + "%");
                t.parent('li').addClass('is-visible');
            }, time);
            time += 0;
        });
    }

    function sortItems() {
        tinysort.defaults.order = 'desc';

        var ul = document.getElementById('scoreboard__items')
            ,lis = ul.querySelectorAll('li')
            ,liHeight = lis[0].offsetHeight
        ;
        ul.style.height = ul.offsetHeight+'px';
        for (var i= 0,l=lis.length;i<l;i++) {
            var li = lis[i];
            li.style.position = 'absolute';
            li.style.top = i*liHeight+'px';
        }
        tinysort('ol#scoreboard__items>li', 'span.js-number').forEach(function(elm,i){
            setTimeout((function(elm,i){
                elm.style.top = i*liHeight+'px';
            }).bind(null,elm,i),40);
        });


    }

    function randEmail() {
        var chars = 'abcdefghijklmnopqrstuvwxyz1234567890';
        var string = '';
        for(var ii=0; ii<15; ii++){
            string += chars[Math.floor(Math.random() * chars.length)];
        }
        return string + '@domain.tld';
    }

    function oneUp() {
        // play audio - update email.
        var randEmail = window.randEmail();
        $('.js-oneup').html('Ny p√•meldt: ' + randEmail);
        $('.js-oneup-audio')[0].play();
    }


    function randomizePodium() {
        $('.js-podium-data').each(function() {
            var random = Math.floor(Math.random() * 900) + 1;
            $(this).fadeOut(200).text(random + ' deltagere').fadeIn(200);
        });
        $(this).data('count', random);
    }

    function podiumUpdate() {
        $('.js-podium').each(function() {
            $(this).addClass('bump');
            randomizePodium();
        });
    }
</script>
</body>
</html>